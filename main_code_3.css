/* ================================
   main_code_3.css
   Sakura Glass (v1) | Part 3
   UI modules + microinteractions
   ================================ */

/* --------------------------------
   0) Motion & focus defaults
--------------------------------- */
:root {
  --ease-out: cubic-bezier(.16, 1, .3, 1);
  --ease-inout: cubic-bezier(.4, 0, .2, 1);
  --t-fast: 160ms;
  --t-mid: 260ms;
  --t-slow: 520ms;

  /* optional: if you defined these in file 1, they will just reuse */
  --glass-bg: rgba(var(--block-color), 0.42);
  --glass-bg-2: rgba(var(--block-color), 0.28);
  --glass-stroke: rgba(var(--white-color), 0.10);
  --glass-stroke-2: rgba(var(--white-color), 0.16);
  --shadow-soft: 0 10px 30px rgba(0, 0, 0, 0.35);
  --shadow-tight: 0 8px 18px rgba(0, 0, 0, 0.32);
  --glow-accent: 0 0 0 1px rgba(var(--bright-color), 0.22), 0 10px 35px rgba(var(--bright-color), 0.12);

  --ring: 0 0 0 3px rgba(var(--bright-color), 0.25);
  --ring-2: 0 0 0 6px rgba(var(--bright-color), 0.10);
}

@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 1ms !important;
    transition-duration: 1ms !important;
    scroll-behavior: auto !important;
  }
}

:where(a, button, input, textarea, select, [tabindex]) :focus-visible,
:where(a, button, input, textarea, select, [tabindex]):focus-visible {
  outline: none !important;
  box-shadow: var(--ring), var(--ring-2) !important;
  border-radius: 12px;
}

/* --------------------------------
   1) Page shell tweaks
--------------------------------- */
.x1000 .l-page {
  margin: 70px auto 28px;
  border-radius: 18px;
  background: linear-gradient(180deg, rgba(var(--menu-back), 0.55), rgba(var(--block-color), 0.28));
  box-shadow: var(--shadow-soft);
  border: 1px solid rgba(var(--white-color), 0.08);
  backdrop-filter: blur(14px) saturate(1.2);
  -webkit-backdrop-filter: blur(14px) saturate(1.2);
  overflow: hidden;
}

/* --------------------------------
   2) Compatibility (anime relations)
   old file had flat colors, we make pill + glow
--------------------------------- */
div.compatibility > a > .text:before,
div.compatibility > span.link-replacement > .text:before {
  border-radius: 999px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.28);
  border: 1px solid rgba(var(--white-color), 0.14);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  transition: transform var(--t-mid) var(--ease-out), box-shadow var(--t-mid) var(--ease-out), filter var(--t-mid) var(--ease-out);
}

div.compatibility > a:hover > .text:before,
div.compatibility > span.link-replacement > .text:before {
  transform: translateY(-1px);
  filter: saturate(1.2);
}

/* weak */
div.compatibility > a > .text.weak:before,
div.compatibility > span.link-replacement > .text.weak:before {
  background: linear-gradient(180deg, rgba(var(--hover-buttoms-2), 0.35), rgba(var(--hover-bottoms-1), 0.35));
  color: rgba(var(--white-color), 0.95);
}
/* moderate */
div.compatibility > a > .text.moderate:before,
div.compatibility > span.link-replacement > .text.moderate:before {
  background: linear-gradient(180deg, rgba(var(--dark-color), 0.38), rgba(var(--block-color), 0.38));
  color: rgba(var(--white-color), 0.95);
}
/* high */
div.compatibility > a > .text.high:before,
div.compatibility > span.link-replacement > .text.high:before {
  background: linear-gradient(180deg, rgba(var(--bright-color), 0.45), rgba(var(--nick-cover), 0.35));
  color: rgba(var(--white-color), 0.98);
  box-shadow: 0 10px 26px rgba(var(--bright-color), 0.18);
}
/* full */
div.compatibility > a > .text.full:before,
div.compatibility > span.link-replacement > .text.full:before {
  background: linear-gradient(180deg, rgba(var(--bright-color), 0.55), rgba(var(--hover-color), 0.25));
  color: rgba(var(--white-color), 1);
  box-shadow: 0 14px 34px rgba(var(--bright-color), 0.22);
}

/* --------------------------------
   3) Quick jump to CSS editor button
--------------------------------- */
.css .b-link[href*="/edit/styles"] {
  font-size: 0 !important;
}

.css .b-link[href*="/edit/styles"]:before {
  content: "CSS";
  position: fixed;
  top: 14px;
  right: 16px;
  z-index: 9999;

  font: 800 12px/34px "Inter", "SF Pro Display", "Segoe UI", system-ui, sans-serif;
  letter-spacing: 0.12em;
  text-transform: uppercase;

  width: 58px;
  height: 34px;
  text-align: center;

  color: rgba(var(--white-color), 0.92);
  background: linear-gradient(180deg, rgba(var(--popup-color), 0.55), rgba(var(--menu-back), 0.45));
  border: 1px solid rgba(var(--white-color), 0.12);
  border-radius: 999px;

  box-shadow: var(--shadow-tight);
  backdrop-filter: blur(14px) saturate(1.1);
  -webkit-backdrop-filter: blur(14px) saturate(1.1);

  transition: transform var(--t-mid) var(--ease-out), box-shadow var(--t-mid) var(--ease-out), border-color var(--t-mid) var(--ease-out);
}

.css .b-link[href*="/edit/styles"]:hover:before {
  transform: translateY(-2px) scale(1.03);
  border-color: rgba(var(--bright-color), 0.35);
  box-shadow: var(--shadow-soft), var(--glow-accent);
}

/* --------------------------------
   4) Rates notes / small texts
--------------------------------- */
.p-user_rates-index .list-lines tr td .rate-text,
.b-user_rate .rate-show .note {
  color: rgba(var(--light-color), 0.88);
}

/* --------------------------------
   5) Badges base polish
--------------------------------- */
.b-badge:before {
  background: none !important;
  transition: transform var(--t-mid) var(--ease-out), filter var(--t-mid) var(--ease-out);
}

.b-badge:hover:before {
  transform: translateY(-1px);
  filter: brightness(1.05);
}

/* --------------------------------
   6) Menu topics hover (anime menu)
--------------------------------- */
.menu-topics-block .entry {
  border-radius: 14px;
  padding: 0 8px;
  transition: background var(--t-fast) var(--ease-inout), box-shadow var(--t-fast) var(--ease-inout), transform var(--t-fast) var(--ease-inout);
}

.menu-topics-block .entry:hover {
  background: linear-gradient(180deg, rgba(var(--block-color), 0.30), rgba(var(--menu-back), 0.22));
  box-shadow: 0 12px 26px rgba(0,0,0,0.28);
  transform: translateY(-1px);
}

.b-animes-menu .menu-topics-block .entry:hover .name {
  color: rgba(var(--hover-color), 1) !important;
  text-decoration: none !important;
}

/* --------------------------------
   7) Collection filters (checkbox look)
--------------------------------- */
.b-collection-filters .block-list li,
.b-collection-filters .b-block_list li {
  border-radius: 14px;
  transition: background var(--t-fast) var(--ease-inout), box-shadow var(--t-fast) var(--ease-inout), color var(--t-fast) var(--ease-inout), transform var(--t-fast) var(--ease-inout);
}

.b-collection-filters .block-list li:hover,
.b-collection-filters .b-block_list li:hover {
  background: rgba(var(--block-color), 0.22);
  box-shadow: 0 10px 22px rgba(0,0,0,0.26);
  transform: translateY(-1px);
}

.b-collection-filters .b-block_list li.selected {
  background: linear-gradient(180deg, rgba(var(--nick-cover), 0.30), rgba(var(--block-color), 0.20));
  box-shadow: 0 12px 26px rgba(0,0,0,0.28);
  color: rgba(var(--white-color), 0.92);
}

.b-collection-filters .b-block_list li.selected:hover {
  color: rgba(var(--hover-color), 1) !important;
}

/* hide native inputs but keep accessible */
.b-collection-filters .block-list li > input,
.b-collection-filters .b-block_list li > input {
  position: absolute;
  left: 0;
  width: 1px;
  height: 1px;
  opacity: 0;
  pointer-events: none;
}

/* --------------------------------
   8) Inputs checkboxes (sitewide)
--------------------------------- */
.b-input input[type="checkbox"],
input[type="checkbox"] {
  width: 0 !important;
  margin-right: 28px !important;
}

.b-input input[type="checkbox"]:before,
input[type="checkbox"]:before {
  content: "";
  display: inline-block;

  width: 16px;
  height: 16px;
  margin: -1px 14px 0 2px;

  border-radius: 6px;
  background: rgba(var(--menu-back), 0.35);
  border: 1px solid rgba(var(--white-color), 0.16);
  box-shadow: 0 8px 16px rgba(0,0,0,0.20);

  vertical-align: middle;
  transition: transform var(--t-fast) var(--ease-inout), box-shadow var(--t-fast) var(--ease-inout), border-color var(--t-fast) var(--ease-inout), background var(--t-fast) var(--ease-inout);
}

input[type="checkbox"]:hover:before,
.b-input input[type="checkbox"]:hover:before {
  transform: translateY(-1px);
  border-color: rgba(var(--bright-color), 0.30);
  box-shadow: 0 12px 24px rgba(0,0,0,0.28);
}

input[type="checkbox"]:checked:before,
.b-input input[type="checkbox"]:checked:before {
  background: linear-gradient(180deg, rgba(var(--bright-color), 0.55), rgba(var(--nick-cover), 0.35));
  border-color: rgba(var(--bright-color), 0.45);
  box-shadow: 0 0 0 2px rgba(var(--bright-color), 0.14), 0 12px 26px rgba(var(--bright-color), 0.14);
}

/* --------------------------------
   9) Catalog entry status corner marker (planned/watching/etc)
--------------------------------- */
.b-catalog_entry.planned .image-decor::after,
.b-catalog_entry.watching .image-decor::after,
.b-catalog_entry.completed .image-decor::after,
.b-catalog_entry.rewatching .image-decor::after,
.b-catalog_entry.on_hold .image-decor::after,
.b-catalog_entry.dropped .image-decor::after {
  width: 26px;
  height: 26px;
  right: 6px;
  bottom: 6px;
  top: auto;

  border-radius: 999px;
  border: 1px solid rgba(var(--white-color), 0.18);
  box-shadow: 0 12px 24px rgba(0,0,0,0.35);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);

  transition: transform var(--t-fast) var(--ease-out), filter var(--t-fast) var(--ease-out);
}

.b-catalog_entry:hover .image-decor::after {
  transform: translateY(-1px) scale(1.04);
  filter: saturate(1.15);
}

.b-catalog_entry.completed .image-decor::after { background: linear-gradient(180deg, rgba(var(--anime-complete), 0.75), rgba(var(--anime-complete), 0.45)); }
.b-catalog_entry.watching  .image-decor::after { background: linear-gradient(180deg, rgba(var(--bright-color), 0.70), rgba(var(--nick-cover), 0.42)); }
.b-catalog_entry.planned   .image-decor::after { background: linear-gradient(180deg, rgba(var(--white-color), 0.45), rgba(var(--dark-color), 0.25)); }
.b-catalog_entry.on_hold   .image-decor::after { background: linear-gradient(180deg, rgba(var(--hover-buttoms-2), 0.55), rgba(var(--hover-bottoms-1), 0.35)); }
.b-catalog_entry.dropped   .image-decor::after { background: linear-gradient(180deg, rgba(var(--manga-complete), 0.62), rgba(var(--manga-complete), 0.30)); }
.b-catalog_entry.rewatching .image-decor::after { background: linear-gradient(180deg, rgba(var(--time-filled), 0.60), rgba(var(--time-empty), 0.32)); }

/* --------------------------------
   10) Inline color blocks (forum)
--------------------------------- */
.inline.orange,
.inline.blue,
.inline.purple,
.inline.green {
  border-radius: 12px !important;
  padding: 2px 8px !important;
  border-left-width: 0 !important;
  border: 1px solid rgba(var(--white-color), 0.14) !important;
  box-shadow: 0 10px 22px rgba(0,0,0,0.22) !important;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

.inline.orange {
  color: rgba(var(--white-color), 0.95) !important;
  background: linear-gradient(180deg, rgba(var(--hover-buttoms-2), 0.35), rgba(var(--hover-bottoms-1), 0.28)) !important;
}

.inline.blue {
  color: rgba(var(--white-color), 0.95) !important;
  background: linear-gradient(180deg, rgba(var(--nick-cover), 0.40), rgba(var(--block-color), 0.26)) !important;
}

.inline.purple {
  color: rgba(var(--white-color), 0.95) !important;
  background: linear-gradient(180deg, rgba(var(--popup-color), 0.45), rgba(var(--menu-back), 0.30)) !important;
}

.inline.green {
  color: rgba(var(--white-color), 0.95) !important;
  background: linear-gradient(180deg, rgba(var(--anime-complete), 0.42), rgba(var(--block-color), 0.22)) !important;
}

/* --------------------------------
   11) HR separator (sakura mist line)
--------------------------------- */
hr {
  height: 1px;
  border: none;
  background: linear-gradient(90deg, rgba(var(--light-color), 0), rgba(var(--light-color), 0.22), rgba(var(--hover-color), 0.10), rgba(var(--light-color), 0.22), rgba(var(--light-color), 0));
  opacity: 1;
}

/* --------------------------------
   12) Video episodes (grid pills)
--------------------------------- */
.c-anime_video_episodes {
  padding-bottom: 12px;
}

.c-anime_video_episodes .b-video_variant {
  display: inline-block;
  text-align: center;

  width: 72px;
  height: 62px;
  line-height: 62px;
  margin: 3px;

  border-radius: 18px;
  background: linear-gradient(180deg, rgba(var(--block-color), 0.30), rgba(var(--menu-back), 0.22));
  border: 1px solid rgba(var(--white-color), 0.10);
  box-shadow: 0 14px 28px rgba(0,0,0,0.26);

  transition: transform var(--t-fast) var(--ease-out), box-shadow var(--t-fast) var(--ease-out), border-color var(--t-fast) var(--ease-out), background var(--t-fast) var(--ease-out);
}

.c-anime_video_episodes .b-video_variant:hover {
  transform: translateY(-2px);
  border-color: rgba(var(--bright-color), 0.28);
  box-shadow: 0 18px 36px rgba(0,0,0,0.30), 0 0 0 1px rgba(var(--bright-color), 0.16);
  background: linear-gradient(180deg, rgba(var(--nick-cover), 0.34), rgba(var(--block-color), 0.22));
}

.c-anime_video_episodes .b-video_variant.active {
  border-color: rgba(var(--bright-color), 0.45);
  box-shadow: 0 0 0 2px rgba(var(--bright-color), 0.14), 0 18px 40px rgba(var(--bright-color), 0.12);
  background: linear-gradient(180deg, rgba(var(--bright-color), 0.35), rgba(var(--nick-cover), 0.20));
}

.c-anime_video_episodes .b-video_variant .episode-num {
  color: rgba(var(--light-color), 0.78);
  font-size: 18px;
  transition: color var(--t-fast) var(--ease-inout);
}

.c-anime_video_episodes .b-video_variant:hover .episode-num,
.c-anime_video_episodes .b-video_variant.active .episode-num {
  color: rgba(var(--white-color), 0.96);
}

/* show-more tweaks */
.c-anime_video_episodes .b-show_more-more { display: inline; }
.c-anime_video_episodes .b-show_more,
.c-anime_video_episodes .hide-more { display: none; }

/* --------------------------------
   13) OAuth apps list small polish
--------------------------------- */
.b-oauth_application .name-logo .name {
  color: rgba(var(--white-color), 0.92);
  text-decoration: none !important;
  transition: color var(--t-mid) var(--ease-inout);
}

.b-oauth_application .name-logo:hover .name {
  color: rgba(var(--hover-color), 1) !important;
}

.b-oauth_application .name-logo:hover .logo {
  border: 1px solid rgba(var(--bright-color), 0.35);
  transform: translateY(-1px) scale(1.03);
  transition: transform var(--t-fast) var(--ease-out), border-color var(--t-fast) var(--ease-out);
}

/* --------------------------------
   14) Hide ads / sponsored blocks if present (safe)
--------------------------------- */
.spns_special_x300,
.spns_special_x1170,
.spns_istari_x300,
.spns_istari_x1170,
.spns_yd_240x500,
.voted-for:before,
.voted-for:after {
  display: none !important;
}
